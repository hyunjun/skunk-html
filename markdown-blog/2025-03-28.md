# Obsidian plugin - templater (+ ChatGPT ì‚½ì§ˆê¸°)

Obsidianì„ ì“°ë©´ì„œ `tasks`, `query`ë‚˜  `dataview`ë¥¼ ì‚¬ìš©í•´ ë‚´ê°€ ë³´ê¸° ì›í•˜ëŠ” tagë¥¼ ëª¨ì•„ë³´ê¸°ëŠ” í–ˆì§€ë§Œ, ë¶ˆí¸í•œ ì ì´ ìˆì—ˆë‹¤. ê·¸ëŸ¬ë‹¤ê°€ templater pluginì˜ user scriptsë¥¼ í†µí•´ ì¡°ê¸ˆ ë” ì›í•˜ëŠ” í˜•íƒœë¡œ ê°€ê³µì„ í•  ìˆ˜ ìˆì„ ê±°ë¼ê³  ìƒê°í–ˆì§€ë§Œ, javascriptë¡œ ë­”ê°€ í•˜ê¸° ê·€ì°®ë‹¤ëŠ” ìƒê°ì— ë‚´ë²„ë ¤ë‘ë‹¤ê°€, ChatGPTë¥¼ í†µí•´ ë§Œë“¤ì–´ì•¼ê² ë‹¨ ìƒê°ì„ í–ˆë‹¤. ëª‡ ì°¨ë¡€ ì§ˆë¬¸ì„ í•˜ë‹ˆ ë‹¤ìŒê³¼ ê°™ì€ codeë¥¼ ì‘ì„±í•´ì¤¬ê³ , ì•„ì§ê¹Œì§„ ì›í•˜ëŠ” í˜•íƒœë¡œ ì˜ ë³´ì—¬ì¤˜ì„œ ë§Œì¡±í•˜ê³  Obsidian noteì— ë„£ê³  ì‚¬ìš©í•˜ê¸° ì‹œì‘í–ˆë‹¤.

````jsx
```dataviewjs
// ë¸”ë¡ ID ì¶”ì¶œìš© ì •ê·œ í‘œí˜„ì‹
const blockIdRegex = /\^([a-zA-Z0-9\-]+)/;

const targetTag = "#tag/I/want/to/use";
const pages = dv.pages(targetTag).sort(p => p.file.name, 'desc');

for (let page of pages) {
    const content = await dv.io.load(page.file.path);
    const lines = content.split("\n");

    const matchedLines = lines
        .map((line, idx) => ({line, idx}))
        .filter(item => item.line.includes(targetTag));

    if (matchedLines.length > 0) {
        dv.header(4, dv.fileLink(page.file.path));
        matchedLines.forEach(item => {
            const blockMatch = item.line.match(blockIdRegex);
            if (blockMatch) {
                const blockId = blockMatch[1];
                const link = dv.el('a', item.line.trim(), {
                    attr: {
                        href: page.file.link + "#^" + blockId
                    }
                });
                dv.paragraph(link);
            } else {
                // ë¸”ë¡ IDê°€ ì—†ëŠ” ê²½ìš° ê²½ê³ ë©”ì‹œì§€ ì¶œë ¥
                dv.paragraph(`(No block ID) ${item.line.trim()}`);
            }
        });
    }
}
```
````

í•˜ì§€ë§Œ, ë°”ë¡œ ìƒê°í•´ë³´ë‹ˆ ì´ ì½”ë“œë¥¼ ë§¤ë²ˆ ë‚´ê°€ í•„ìš”ë¡œ í•˜ëŠ” noteë§ˆë‹¤ copy & pasteë¥¼ í•˜ëŠ” ê±´ ë§¤ìš° ë¶ˆí¸í•˜ê³  ë¹„íš¨ìœ¨ì ì¸ ì¼ì´ì—ˆë‹¤. ë‚´ê°€ ì›í•˜ëŠ” ê±´ ë‹¨ì§€ tagë¥¼ ì‚¬ìš©í•´ ê´€ë ¨ëœ filenameê³¼, tagê°€ í¬í•¨ëœ lineì„ ë³´ê¸° ì›í•˜ëŠ” ê²ƒ ë¿ì´ì—ˆê¸° ë•Œë¬¸ì—, ë”°ë¡œ functionì„ ë§Œë“¤ê³  ì—¬ê¸°ì— ë‚´ê°€ ì›í•˜ëŠ” tagë§Œ í˜¸ì¶œí•˜ëŠ” ê²Œ ë‹¹ì—°íˆ í•©ë¦¬ì ì¸ ì¼ì´ì—ˆë‹¤. ì ì‹œ ê²€ìƒ‰í•´ë³´ë‹ˆ templater pluginì˜ user scriptsê°€ ì´ ì—­í• ì„ í•œë‹¤ëŠ” ê±¸ ì•Œ ìˆ˜ ìˆì—ˆë‹¤.

https://silentvoid13.github.io/Templater/user-functions/script-user-functions.html

programmingì˜ ì‹œì‘ì€ Hello World. user scriptsì˜ ì„¤ëª…ë„ msgë¥¼ ì¶œë ¥í•˜ëŠ” functionì„ ì •ì˜í•˜ê³  obsidian noteì—ì„œëŠ” functionì— msg argumentë§Œ ì „ë‹¬í•´ì„œ ì¶œë ¥í•´ë³´ëŠ” ì˜ˆì œë¶€í„° ì•Œë ¤ì¤€ë‹¤. Obsidian vaultì˜ root directoryì— scriptsë€ directoryë¥¼ ë§Œë“¤ê³  ê·¸ ì•ˆì— msg.jsë€ javascript fileì„ ë§Œë“¤ì—ˆë‹¤(ì£¼ì˜: Obsidianì—ì„œ fileì„ ë§Œë“¤ë©´ ìë™ìœ¼ë¡œ .md í™•ì¥ìê°€ ë¶™ì–´ msg.js.mdë¡œ ìƒì„±ë˜ë¯€ë¡œ terminalì—ì„œ ë§Œë“¤ì–´ì•¼ í•œë‹¤)

```jsx
function my_function (msg) {
    return `Message from my script: ${msg}`;
}
module.exports = my_function;
```

Obsidianì˜ templater pluginì—ì„œ í•´ë‹¹ scriptê°€ ì œëŒ€ë¡œ ì¸ì‹ì´ ë˜ë©´ 0ì´ ì•„ë‹ˆë¼, scripts directoryì— ìˆëŠ” .js file ê°¯ìˆ˜ë§Œí¼ í‘œì‹œê°€ ëœë‹¤. scripts directoryë§Œ ë§Œë“¤ê³  templater pluginì„ í™•ì¸í•´ë³´ë©´ ì²˜ìŒì—ëŠ” â€œDetected 0 User Script(s)â€ë¼ê³  ë‚˜ì˜¨ë‹¤.

![SCR-20250328-sqon.png](images/SCR-20250328-sqon.png)

ì´ì œ Obsidian noteì—ì„œ ë‹¤ìŒê³¼ ê°™ì€ templater commandë¥¼ ì…ë ¥í•˜ê³ 

`<% tp.user.msg("Hello World!") %>`

ë‹¤ìŒ commandë¥¼ ì‹¤í–‰í•˜ë©´

![SCR-20250328-srdw.png](images/SCR-20250328-srdw.png)

Obsidian noteì—ì„œ `Message from my script: Hello World!` textë¥¼ ë³¼ ìˆ˜ ìˆë‹¤.

ê·¸ëŸ¼ ì´ì œ function bodyë§Œ ë‚´ê°€ ì›í•˜ëŠ” ê±¸ë¡œ ë°”ê¾¸ê³  í˜¸ì¶œë§Œ í•˜ë©´ ë˜ê² ì§€? ë¼ê³  ìƒê°í–ˆë‹¤. ë‹¤ìŒê³¼ ê°™ì€ javascript fileì„ scripts/tagExtractor.jsë¡œ ì €ì¥í–ˆë‹¤.

```jsx
// ê³µí†µ í•¨ìˆ˜ ì •ì˜
async function extractTaggedBlocks(dv, tag) {
    const blockIdRegex = /\^([a-zA-Z0-9\-]+)/;
    const pages = dv.pages(tag).sort(p => p.file.name, 'desc');

    for (let page of pages) {
        const content = await dv.io.load(page.file.path);
        const lines = content.split("\n");

        const matchedLines = lines
            .map((line, idx) => ({line, idx}))
            .filter(item => item.line.includes(tag));

        if (matchedLines.length > 0) {
            dv.header(4, dv.fileLink(page.file.path));
            matchedLines.forEach(item => {
                const blockMatch = item.line.match(blockIdRegex);
                if (blockMatch) {
                    const blockId = blockMatch[1];
                    const link = dv.el('a', item.line.trim(), {
                        attr: {
                            href: page.file.link + "#^" + blockId
                        }
                    });
                    dv.paragraph(link);
                } else {
                    dv.paragraph(`ğŸ”¸ (ë¸”ë¡ ID ì—†ìŒ) ${item.line.trim()}`);
                }
            });
        }
    }
}

// ì™¸ë¶€ì—ì„œ ì‚¬ìš©í•˜ê¸° ìœ„í•´ export
module.exports = extractTaggedBlocks;
```

í•˜ì§€ë§Œ ëŒ€ë¶€ë¶„ ê·¸ë ‡ë“¯ ë‹¤ìŒ ë‹¨ê³„ë¥¼ ê°ˆ ë•ŒëŠ” ë°”ë¡œ ì§„í–‰ì´ ë˜ì§€ ì•Šì•˜ë‹¤. ë¬¸ì„œë¥¼ ì½ê¸° ê·€ì°®ì•„ì„œ ê·¸ëƒ¥ ê²€ìƒ‰ë§Œ í•˜ë©´ì„œ ëŒ€ì¶© copy & pasteë¡œ í•´ë³´ë ¤ê³  í–ˆì§€ë§Œ, ì „í˜€ ë™ì‘í•˜ì§€ ì•Šì•˜ë‹¤. ê·¸ê²ƒë§ˆì € í•˜ê¸° ì‹«ì–´ì„œ ê²°êµ­ ChatGPTì˜ ë„ì›€ì„ ë°›ê¸° ì‹œì‘í–ˆë‹¤. (ë¬¸ì„œë§Œ ì²œì²œíˆ ì½ì—ˆìœ¼ë©´ ëª‡ ë¶„ì´ë©´ ì•Œì•˜ì„) async í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ëŠ” commandê°€ ë‹¤ë¥´ë‹¤ëŠ” ì ë¶€í„° ì‹œì‘í•´ ì—¬ëŸ¬ê°€ì§€ë¥¼ ChatGPTì—ê²Œ ë§¡ê¸°ë ¤ë‹¤ë³´ë‹ˆ ì˜¤íˆë ¤ ì‹œê°„ì„ ë‚­ë¹„í•˜ê²Œ ë˜ì—ˆë‹¤. ì—¬ê¸°ì„œ ê´œíˆ ChatGPTë¥¼ ë¶™ì¡ê³  ëŠ˜ì–´ì¡Œë˜ ì´ìœ ëŠ” ì´ë¯¸ ì˜ ì•Œë ¤ì¡Œë“¯ì´ ChatGPTëŠ” ìì‹ ì´ ìƒì„±í•œ ë‹µë³€ì´ ë§ê³  í‹€ë¦°ì§€ë¥¼ ì „í˜€ ëª¨ë¥´ê¸° ë•Œë¬¸ì— â€˜ìì‹ ìˆê²Œâ€™ ê³„ì† ìƒì„±ì„ í•˜ì§€ë§Œ, ê²°êµ­ ê·¸ ê²€ì¦ì€ ì‚¬ëŒ(ë‚˜)ì´ í•´ì•¼ í•˜ë‹ˆ ì˜¤íˆë ¤ ì§œì¦ì´ ë‚˜ì„œ ë” ë¬¼ì–´ë³´ê²Œ ë˜ì—ˆë˜ ê²ƒì´ì—ˆë‹¤. ChatGPTê°€ ìƒì„±í•´ì¤€ ë‹¤ì–‘í•œ ì˜¤ë‹µë“¤ì˜ ì¼ë¶€ì´ë‹¤.

`<%* tp.user.tagExtractor(dv, "#manta") %>`

```jsx
// ìµœì¢…ì •ë‹µ (2024ë…„ í˜„ì¬ ìµœì‹  ë²„ì „ í™•ì •)
const templater = app.plugins.plugins["templater-obsidian"].templater;
await templater.user_scripts_folder.scripts["tagExtractor"](dv, "íƒœê·¸ëª…");
```

`<%*
await dv.view("scripts/tagViewer", { tag: "#manta/process/planning/2025Q2" });
_%>`

```jsx
const tagExtractor = await dv.io.load("scripts/tagExtractor.js");
await tagExtractor.extractTaggedBlocks(dv, "íƒœê·¸ëª…");
```

```jsx
const templater = app.plugins.plugins["templater-obsidian"].templater;
await templater.current_functions_object.scripts["tagExtractor"](dv, "íƒœê·¸ëª…");
```

ê·¸ ì™¸ì—ë„ êµ‰ì¥íˆ ë§ì€ë° ê²€ìƒ‰ì„ í™œì„±í™”í•˜ê³  ì‚¬ìš©í•´ì„œ ê·¸ëŸ°ì§€ ChatGPTëŠ” ìœ„ì˜ ì˜ˆì²˜ëŸ¼ â€œìµœì¢…ì •ë‹µâ€ì´ë¼ê±°ë‚˜, â€œì´ë²ˆì—ëŠ” í™•ì‹¤í•©ë‹ˆë‹¤â€ê°™ì€ ë§ì„ ì‚¬ìš©í•˜ë©° 100% ìì‹ ê° ê°€ë“í•œ ì˜¤ë‹µì„ ê³„ì† ì œê³µí–ˆê³ , ëŒ€ëµ 3ì‹œê°„ì„ ë§¤ë‹¬ë¦¬ë‹¤ê°€ ê²°êµ­ í¬ê¸°í•˜ê³  ì ì— ë“¤ì—ˆë‹¤.

ë‹¤ìŒë‚  ì¼ì„ ë§ˆì¹œ í›„, ë‹¤ì‹œ í•œë²ˆ í…ŒìŠ¤íŠ¸í•´ë´ì•¼ì§€ í•˜ëŠ” ìƒê°ì— ìš°ì„  templater objectê°€ ì¡´ì¬í•˜ëŠ”ì§€ë¶€í„° ê²€ì‚¬í•˜ê¸° ì‹œì‘í–ˆë‹¤.

````jsx
```dataviewjs
const templater = app.plugins.plugins["templater-obsidian"].templater;

dv.paragraph("Templater í”ŒëŸ¬ê·¸ì¸ ë‚´ ê°ì²´ ì ê²€:");

dv.list([
    `templater.userFunctions: ${!!templater.userFunctions}`,
    `templater.user_scripts: ${!!templater.user_scripts}`,
    `templater.functions: ${!!templater.functions}`,
    `templater.user_functions: ${!!templater.user_functions}`,
]);
```
````

ìœ„ì™€ ê°™ì´ Obsidian noteì— ì…ë ¥í•˜ë©´ ëª¨ë‘ falseë¥¼ ì¶œë ¥í•œë‹¤. templaterì— ì¡´ì¬í•˜ëŠ” objectëŠ” ë­ê°€ ìˆì„ê¹Œ? ì°¾ì•„ë³´ë‹ˆ `templater.current_functions_object`ê°€ ì¡´ì¬í•œë‹¤ëŠ” ì‚¬ì‹¤ì„ ì•Œ ìˆ˜ ìˆì—ˆë‹¤. í˜¹ì‹œ? í•˜ëŠ” ìƒê°ê³¼ í•¨ê»˜ ì´ë²ˆì—” ì–´ì œ í•˜ë“¯ì´ ì˜¨ê°– ì •ë³´ë¥¼ ë„£ê³  ì§ˆë¬¸í•˜ì§€ ì•Šê³  ê°„ë‹¨í•˜ê²Œ ë‹¤ìŒê³¼ ê°™ì´ ë¬¼ì–´ë´¤ë‹¤.

```jsx
What kinds of objects are existing inside of templater.current_functions_object in templater plugin of obsidian?
```

ë‹µë³€ì„ ë³´ë‹ˆ ì´ ì•ˆì— userê°€ ì¡´ì¬í•œë‹¤ëŠ” ê±¸ ì•Œ ìˆ˜ ìˆì—ˆê³ , ë°”ë¡œ ë‹¤ìŒ ì§ˆë¬¸ì„ í–ˆë‹¤

```jsx
Then how to use user script with templater.current_functions_object.user?
```

ì—¬ê¸°ê¹Œì§€ ì˜¤ë‹ˆ ë¬¸ì œëŠ” ê±°ì˜ í•´ê²°ì´ ë˜ì—ˆë‹¤. 

````jsx
```dataviewjs
const templater = app.plugins.plugins["templater-obsidian"].templater;

dv.paragraph("Templater í”ŒëŸ¬ê·¸ì¸ ë‚´ ê°ì²´ ì ê²€:");

dv.list([
    `templater.userFunctions: ${!!templater.userFunctions}`,
    `templater.user_scripts: ${!!templater.user_scripts}`,
    `templater.functions: ${!!templater.functions}`,
    `templater.user_functions: ${!!templater.user_functions}`,
    `templater.current_functions_object.user.tagExtractor: ${!!templater.current_functions_object.user.tagExtractor}`,
]);
```
````

ë‹¤ìŒê³¼ ê°™ì´ í•´ë³´ë‹ˆ ë§ˆì§€ë§‰ lineì—ì„œ ë“œë””ì–´ trueê°€ ì¶œë ¥. ë“œë””ì–´. ë‹¤ìŒê³¼ ê°™ì´ Obsidian noteì—ì„œ dataviewjsë¥¼ ì…ë ¥í•˜ë©´ ì‘ì„±í•œ functionì„ ì´ìš©í•´ ì›í•˜ëŠ” ë™ì‘ì´ ê°€ëŠ¥í•˜ë‹¤.

````jsx
```dataviewjs
const templater = app.plugins.plugins["templater-obsidian"].templater;
await templater.current_functions_object.user.tagExtractor(dv, "íƒœê·¸ëª…");
```
````

ì „ë‚ ì˜ ì‚½ì§ˆê³¼ ë‹¬ë¦¬ ì—¬ê¸°ê¹Œì§€ ì˜¤ëŠ”ë° 5ë¶„. ë¬¸ì„œë¥¼ ì œëŒ€ë¡œ ì½ê³ , ë‚´ê°€ ì•Œì•„ì•¼ AIë¥¼ ì œëŒ€ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤ëŠ” í‰ë²”í•œ êµí›ˆì„ ì œëŒ€ë¡œ ê²ªì—ˆë‹¤.
